function createTest(description, testCases) {
    var errors = array();

    print(description);

    testCases.forEach(async fun (key, testCase) {
        try {
            await testCase.test();
            print ("\t", testCase.name, "........passed");
        } catch err {
            errors <- errors.append(err);
            print ("\t", testCase.name, "........failed");
            print ("\t\t", err);
        }
    });

    if (errors.length == 0) {
        print("\n\tAll tests passed.\n");
        return 0;
    }

    print(errors.length, " errors in ", description);
    return 1;
}

function it(text, fn) {
    return {
        name: text,
        test: fn
    };
}

export {
    describe: createTest,
    it: it
};